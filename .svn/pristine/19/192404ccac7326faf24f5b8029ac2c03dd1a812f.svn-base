(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chat-chat"],{"1da1":function(t,e,n){"use strict";function i(t,e,n,i,a,r,o){try{var s=t[r](o),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(i,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function s(t){i(o,a,r,s,c,"next",t)}function c(t){i(o,a,r,s,c,"throw",t)}s(void 0)}))}}n("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},2738:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAvNJREFUWEfFl0uoTlEUx383FOVVQgwoFBPkKuVRXnU9Bh4pzAwwuUrcQkwwIQxIMaFbZkie5TEgBqgrhAnlKgxuHgOugQFK/9vaWt9pf2fv8+nrrtp95zt7nbX+e+211/rvFvpZWvrZP1UADAfmAgttjAU0JJ9sPAA0HgO9OYvLBdAO7AEm5BgFPgBHgNMp/RSAgcB1YIUZ0vNr4I0bmprqxjRglenfsuff9YCUAVgPXLAPfwLbgbOpFdn8FuAkMMT+bwAuxr6tB2AJcNc+eAksB3oynQe1ccBtYIa9WArcK9qIARgAhJAdBA5UdFxU3+9saEv/eIUYgKPALuCOrbzM/zObbE2AVCSWAceA3WUAwr7rCE0EviUMfwEGA8MSeiOB94COck0++AhI6SkwCVgLXM0IfS4AmVoDXAHeAbPD4jyAoHDDHaMUhioAZOuyLe7fAj2A48AOQL8dKc82XxWAElpJeQLYKRsewENgHrAtp4I1CEAF6hrwCJhfBPAWmAwsBu43KQKjgc9ANzClCOAHMBQYAyi0QZ4E5QioEfbuex3AH10hCipaqJpY38nxWxAACOXXJgJQHxkfAxC2YAGgfMiRqkk4yhYX3YKQhJuBzhzvtlU5hSiYa7MKG03CQ8BeQKVYvT9HqkZA9uXnMLCvmAOq1arZ6vmrc7w3EIFLwDrrMeo1NUmoOv3KWM/WzN5fJQLiCGeMLU0PlK3YDUW9TgEiIKoJKQ6QC0DcQIknglJT6GLt+KZRMBGRmYmteG7zsxJ6L6weiKKt9LoxACINv0xJtVuk5H8k1H/ZGOTITp/NepTM80Ely8YMblAEqfZ+3oiI5qK8sIyUel4ogrIpkyPImVr7OSMg+h/lg2URCKsRP9SZFUWTiFAoN0TFdPkIPUPlW5cWUTORUPV7iSiYzn4ND0zlQGy/tSUCIrbkRZkt0YnxItYjx1Eq3ggAfaM9XWTXsjnW0YpXsy67mqmdp/hkaRLGotCUd6mrWVOceqN/AZEGlSGxjZ61AAAAAElFTkSuQmCC"},3486:function(t,e,n){var i=n("ff76");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("a6eb1e4a",i,!0,{sourceMap:!1,shadowMode:!1})},"584a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABrCAIAAAAQH4BlAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjczODlEQzJDNURBMTFFOTlBMzJEOTA1NUFBOUQ5RTciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjczODlEQzFDNURBMTFFOTlBMzJEOTA1NUFBOUQ5RTciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjZCMjVBMzg0M0EyMjM2RDNFMEQ5ODQ0NERGOTdBNEQ5IiBzdFJlZjpkb2N1bWVudElEPSI2QjI1QTM4NDNBMjIzNkQzRTBEOTg0NDRERjk3QTREOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtaarjUAAAlZSURBVHja7J1bSBR/FMe3cdfSrNaybOuhm10gKLsQ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"},"5c09":function(t,e,n){"use strict";n.r(e);var i=n("f507"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"6ca6":function(t,e,n){"use strict";var i=n("3486"),a=n.n(i);a.a},"6e47":function(t,e,n){var i=n("8239");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("023ede1e",i,!0,{sourceMap:!1,shadowMode:!1})},"795b":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShowA?n("a",{staticClass:"uni-link",class:{"uni-link--withline":!0===t.showUnderLine||"true"===t.showUnderLine},style:{color:t.color,fontSize:t.fontSize+"px"},attrs:{href:t.href,download:t.download}},[t._t("default",[t._v(t._s(t.text))])],2):n("v-uni-text",{staticClass:"uni-link",class:{"uni-link--withline":!0===t.showUnderLine||"true"===t.showUnderLine},style:{color:t.color,fontSize:t.fontSize+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openURL.apply(void 0,arguments)}}},[t._t("default",[t._v(t._s(t.text))])],2)},r=[]},8239:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.action[data-v-51595a5b]{display:flex;justify-content:space-between;padding:%?20?%;font-size:%?26?%}.msgLst[data-v-51595a5b]{background-color:#ededed}.msgLst .loadMore[data-v-51595a5b]{text-align:center;font-size:%?28?%;color:#444;margin:%?20?%}.msgLst .item[data-v-51595a5b]{margin:%?20?%;font-size:%?28?%}.msgLst .item .head[data-v-51595a5b]{width:%?80?%;height:%?80?%;border-radius:%?80?%;margin-right:%?20?%}.msgLst .item .time[data-v-51595a5b]{text-align:center;font-size:%?26?%;color:#888;padding:%?20?%}.msgLst .item .msg[data-v-51595a5b]{max-width:%?450?%;word-wrap:break-word;background-color:#fff;border-radius:%?10?%;padding:%?20?%}.msgLst .item .msgPic[data-v-51595a5b]{max-width:%?250?%;background-color:#fff;border-radius:%?10?%;border:%?1?% solid #ccc}.msgLst .item .tip[data-v-51595a5b]{display:flex;flex-direction:column;align-items:center;margin-top:%?60?%;margin-bottom:%?40?%}.msgLst .detail[data-v-51595a5b]{background-color:#fff;padding:%?15?%;border-radius:%?10?%;width:%?500?%;font-size:%?28?%;display:flex;flex-direction:column;align-items:center}.msgLst .detail .img[data-v-51595a5b]{width:%?100?%;height:%?100?%;margin-right:%?20?%}.msgLst .detail .text[data-v-51595a5b]{width:%?380?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.msgLst .detail .button[data-v-51595a5b]{background-color:#1ecc99;line-height:%?70?%;width:%?200?%;border-radius:%?10?%;color:#fff;text-align:center;margin-top:%?15?%}.send[data-v-51595a5b]{background-color:#f7f7f7;padding:%?20?%;display:flex;align-items:center}.send .sendText[data-v-51595a5b]{height:%?80?%;line-height:%?80?%;padding:%?0?% %?20?%;font-size:%?32?%;flex:1;border-radius:%?10?%;background-color:#fff;margin-right:%?20?%}.send .sendBtn[data-v-51595a5b]{font-size:%?30?%;height:%?80?%;line-height:%?80?%;background-color:#1ecc99;color:#fff}.send .sendBtn2[data-v-51595a5b]{width:%?50?%;height:%?50?%}.picMode[data-v-51595a5b]{height:%?300?%;padding:%?40?% %?80?%;background-color:#f7f7f7;border-top:%?1?% solid #e3e3e3;display:flex}.picMode .btnPic[data-v-51595a5b]{width:%?100?%;height:%?100?%;margin-right:%?80?%}.picMode .btnTxt[data-v-51595a5b]{font-size:%?26?%;width:%?100?%;text-align:center}',""]),t.exports=e},"86f1":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={uniLink:n("b321").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",["admin"==t.role||"seller"==t.role?i("v-uni-view",{staticClass:"action"},[i("v-uni-view",{staticClass:"note",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showUserNote.apply(void 0,arguments)}}},[t._v(t._s(t.userNote?"推荐人:"+t.userNote:"无推荐人"))]),i("v-uni-navigator",{staticClass:"sale",attrs:{url:"../watch/addSale?code="+t.userNote}},[t._v("添加销售单")])],1):t._e(),i("v-uni-scroll-view",{staticClass:"msgLst",style:{height:t.scrollHeight+"px"},attrs:{"scroll-y":"true","scroll-into-view":t.scrollIntoView,"scroll-with-animation":"true"}},[t.loadMore&&t.msgList.length>0?i("v-uni-view",{staticClass:"loadMore",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMoreMsg()}}},[t._v("查看更多消息")]):t._e(),t._l(t.msgList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"item",attrs:{id:"msg_"+n}},[i("v-uni-view",{staticStyle:{"margin-bottom":"20rpx","font-size":"28rpx"}},[e.showTime?i("v-uni-view",{staticClass:"time"},[t._v(t._s(e.showTime))]):t._e(),t.isSelf(e.sender)?i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-view",{staticStyle:{flex:"1"}}),0==e.contentType?i("v-uni-text",{staticClass:"msg",staticStyle:{"background-color":"#1ECC99"},on:{longpress:function(n){arguments[0]=n=t.$handleEvent(n),t.copyItem(e.contentText)}}},t._l(e.contentTexts,(function(e,n){return i("v-uni-text",{key:n},[e.isUrl?i("uni-link",{attrs:{href:e.url,text:e.text,color:"#0D1171"}}):i("v-uni-text",[t._v(t._s(e.text))])],1)})),1):1==e.contentType?i("v-uni-image",{staticClass:"msgPic",attrs:{src:e.contentPic,mode:"widthFix"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.previewImage(e.contentPic)}}}):11==e.contentType?i("v-uni-view",{staticClass:"detail",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoDetail(e.contentText.type,e.contentText.id)}}},[i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-image",{staticClass:"img",attrs:{src:e.contentText.pic,mode:"aspectFill"}}),i("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-around"}},[i("v-uni-view",{staticClass:"text"},[t._v(t._s(e.contentText.title))]),i("v-uni-view",{staticClass:"text"},[t._v(t._s(e.contentText.subTitle))])],1)],1)],1):t._e(),i("v-uni-image",{staticClass:"head",staticStyle:{"margin-left":"20rpx"},attrs:{src:t.getUserHead(e.sender),mode:"aspectFill"}})],1):i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-image",{staticClass:"head",attrs:{src:t.getUserHead(e.sender),mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showUserNote()}}}),0==e.contentType?i("v-uni-text",{staticClass:"msg",on:{longpress:function(n){arguments[0]=n=t.$handleEvent(n),t.copyItem(e.contentText)}}},t._l(e.contentTexts,(function(e,n){return i("v-uni-text",{key:n},[e.isUrl?i("uni-link",{attrs:{href:e.url,text:e.text,color:"#0D1171"}}):i("v-uni-text",[t._v(t._s(e.text))])],1)})),1):1==e.contentType?i("v-uni-image",{staticClass:"msgPic",attrs:{src:e.contentPic,mode:"widthFix"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.previewImage(e.contentPic)}}}):11==e.contentType?i("v-uni-view",{staticClass:"detail",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoDetail(e.contentText.type,e.contentText.id)}}},[i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-image",{staticClass:"img",attrs:{src:e.contentText.pic,mode:"aspectFill"}}),i("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-around"}},[i("v-uni-view",{staticClass:"text"},[t._v(t._s(e.contentText.title))]),i("v-uni-view",{staticClass:"text"},[t._v(t._s(e.contentText.subTitle))])],1)],1)],1):t._e()],1)],1)],1)})),t.detail?i("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center","padding-top":"20rpx"}},[i("v-uni-view",{staticClass:"detail",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoDetail(t.detail.type,t.detail.id)}}},[i("v-uni-view",{staticStyle:{display:"flex","border-bottom":"1rpx solid #cccccc","padding-bottom":"15rpx"}},[i("v-uni-image",{staticClass:"img",attrs:{src:t.detail.pic,mode:"aspectFill"}}),i("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-around"}},[i("v-uni-view",{staticClass:"text"},[t._v(t._s(t.detail.title))]),i("v-uni-view",{staticClass:"text"},[t._v(t._s(t.detail.subTitle))])],1)],1),i("v-uni-view",{staticClass:"button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendDetail.apply(void 0,arguments)}}},[t._v("发送链接")])],1)],1):t._e(),i("v-uni-view",{staticStyle:{height:"20rpx"}})],2),i("v-uni-view",{staticClass:"send"},[i("v-uni-textarea",{staticClass:"sendText",attrs:{type:"text",value:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeMode(0)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t.content.length>0?i("v-uni-button",{staticClass:"sendBtn",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMsg(t.content,0)}}},[t._v("发送")]):i("v-uni-image",{staticClass:"sendBtn2",attrs:{src:n("2738"),mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeMode()}}})],1),1==t.mode?i("v-uni-view",{staticClass:"picMode"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.actionMode(0)}}},[i("v-uni-image",{staticClass:"btnPic",attrs:{src:n("a649"),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"btnTxt"},[t._v("相册")])],1),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.actionMode(1)}}},[i("v-uni-image",{staticClass:"btnPic",attrs:{src:n("584a"),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"btnTxt"},[t._v("拍摄")])],1)],1):t._e()],1)},r=[]},"919d":function(t,e,n){"use strict";n("d3b7"),n("e25e"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={getHoroscope:function(t){var e=["摩羯","水瓶","双鱼","白羊","金牛","双子","巨蟹","狮子","处女","天秤","天蝎","射手","摩羯"];t=new Date(t);var n=t.getMonth()+1,i=t.getDate(),a=n-(i-14<"865778999988".charAt(n));return e[a]+"座"},sumAge:function(t){var e=new Date(t.replace(/-/g,"/")),n=new Date,i=n.getTime()-e.getTime(),a=Math.floor(i/864e5),r=i%864e5,o=Math.floor(r/36e5),s=r%36e5,c=(Math.floor(s/6e4),s%6e4);Math.round(c/1e3);return a+"天 "+o+"小时 "},getChatTime:function(t,e){if(t=t.toString().length<13?1e3*t:t,e=e.toString().length<13?1e3*e:e,(parseInt(t)-parseInt(e))/1e3>300)return this.gettime(t)},ISO8601DateStr2Date:function(t){if(t){var e=t.replace("T"," "),n=new Date(e);return n.getTime()}return null},gettime:function(t){t=t.toString().length<13?1e3*t:t;var e=(new Date).getTime(),n=(e-parseInt(t))/1e3;return n<43200?this.dateFormat(new Date(t),"{A} {t}:{ii}"):n<518400?this.dateFormat(new Date(t),"{Mon}月{DD}日 {A} {t}:{ii}"):this.dateFormat(new Date(t),"{Y}-{MM}-{DD} {A} {t}:{ii}")},parseNumber:function(t){return t<10?"0"+t:t},dateFormat:function(t,e){var n={},i=/\{([^}]+)\}/,a=["1","2","3","4","5","6","7","8","9","10","11","12"];n["Y"]=t.getFullYear(),n["M"]=t.getMonth()+1,n["MM"]=this.parseNumber(n["M"]),n["Mon"]=a[n["M"]-1],n["D"]=t.getDate(),n["DD"]=this.parseNumber(n["D"]),n["h"]=t.getHours(),n["hh"]=this.parseNumber(n["h"]),n["t"]=n["h"]>12?n["h"]-12:n["h"],n["tt"]=this.parseNumber(n["t"]),n["A"]=n["h"]>12?"下午":"上午",n["i"]=t.getMinutes(),n["ii"]=this.parseNumber(n["i"]),n["s"]=t.getSeconds(),n["ss"]=this.parseNumber(n["s"]);while(i.test(e))e=e.replace(i,n[RegExp.$1]);return e},getAgeByBirthday:function(t){var e=new Date(t.replace(/-/g,"/")),n=new Date;return n.getFullYear()-e.getFullYear()-(n.getMonth()<e.getMonth()||n.getMonth()==e.getMonth()&&n.getDate()<e.getDate()?1:0)}};e.default=i},"96cf":function(t,e){!function(e){"use strict";var n,i=Object.prototype,a=i.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag",l="object"===typeof t,u=e.regeneratorRuntime;if(u)l&&(t.exports=u);else{u=e.regeneratorRuntime=l?t.exports:{},u.wrap=A;var d="suspendedStart",h="suspendedYield",g="executing",f="completed",v={},p={};p[o]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==i&&a.call(b,o)&&(p=b);var w=E.prototype=x.prototype=Object.create(p);I.prototype=w.constructor=E,E.constructor=I,E[c]=I.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===I||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(w),t},u.awrap=function(t){return{__await:t}},M(D.prototype),D.prototype[s]=function(){return this},u.AsyncIterator=D,u.async=function(t,e,n,i){var a=new D(A(t,e,n,i));return u.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(w),w[c]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,a){return s.type="throw",s.arg=t,e.next=i,a&&(e.method="next",e.arg=n),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:S(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),v}}}function A(t,e,n,i){var a=e&&e.prototype instanceof x?e:x,r=Object.create(a.prototype),o=new k(i||[]);return r._invoke=U(t,n,o),r}function y(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function x(){}function I(){}function E(){}function M(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function D(t){function e(n,i,r,o){var s=y(t[n],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"===typeof l&&a.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,r,o)}),(function(t){e("throw",t,r,o)})):Promise.resolve(l).then((function(t){c.value=t,r(c)}),(function(t){return e("throw",t,r,o)}))}o(s.arg)}var n;function i(t,i){function a(){return new Promise((function(n,a){e(t,i,n,a)}))}return n=n?n.then(a,a):a()}this._invoke=i}function U(t,e,n){var i=d;return function(a,r){if(i===g)throw new Error("Generator is already running");if(i===f){if("throw"===a)throw r;return j()}n.method=a,n.arg=r;while(1){var o=n.delegate;if(o){var s=L(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=g;var c=y(t,e,n);if("normal"===c.type){if(i=n.done?f:h,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=f,n.method="throw",n.arg=c.arg)}}}function L(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,L(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=y(i,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,v;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){while(++i<t.length)if(a.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return r.next=r}}return{next:j}}function j(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},9757:function(t,e,n){"use strict";n.r(e);var i=n("bc95"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},a649:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABrCAIAAAAQH4BlAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjczODlEQkVDNURBMTFFOTlBMzJEOTA1NUFBOUQ5RTciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjczODlEQkRDNURBMTFFOTlBMzJEOTA1NUFBOUQ5RTciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjZCMjVBMzg0M0EyMjM2RDNFMEQ5ODQ0NERGOTdBNEQ5IiBzdFJlZjpkb2N1bWVudElEPSI2QjI1QTM4NDNBMjIzNkQzRTBEOTg0NDRERjk3QTREOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgW8eKkAAAemSURBVHja7J3LTxNdGMbrUEBAUFHxAiEmLExKYkRM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"},b321:function(t,e,n){"use strict";n.r(e);var i=n("795b"),a=n("9757");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("6ca6");var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"03b6d5de",null,!1,i["a"],o);e["default"]=c.exports},bc95:function(t,e,n){"use strict";n("a9e3"),n("2ca0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA:function(){return this._isH5=!0,!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created:function(){this._isH5=null},methods:{isMail:function(){return this.href.startsWith("mailto:")},isTel:function(){return this.href.startsWith("tel:")},openURL:function(){window.open(this.href)},makePhoneCall:function(t){uni.makePhoneCall({phoneNumber:t})}}};e.default=i},c1fe:function(t,e,n){"use strict";n.r(e);var i=n("86f1"),a=n("5c09");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("d7c7");var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"51595a5b",null,!1,i["a"],o);e["default"]=c.exports},d7c7:function(t,e,n){"use strict";var i=n("6e47"),a=n.n(i);a.a},f507:function(t,e,n){"use strict";var i=n("4ea4");n("c975"),n("d3b7"),n("ac1f"),n("5319"),n("841c"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("1da1")),r=i(n("919d")),o={data:function(){return{baseFileUrl:this.$baseFileUrl,userId:"",content:"",flushCnt:0,msgList:[],serviceMsgId:-1,scrollHeight:100,scrollIntoView:"",mode:0,loadMore:!0,detail:null,userNote:"",role:"",userName:""}},onLoad:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$onLaunched;case 2:e.userId=t.id,t.name&&(uni.setNavigationBarTitle({title:t.name}),e.userName=t.name),uni.$on("user-msg-update",(function(t){e.flushData()})),getApp().globalData.g_chat.setCurChatUserId(e.userId),getApp().globalData.g_chat.updateUserMsg(e.userId),e.userNote=getApp().globalData.g_chat.getUserNote(e.userId),e.role=uni.getStorageSync("role"),getApp().globalData.pageInItem&&(e.detail=getApp().globalData.pageInItem,getApp().globalData.pageInItem=""),setTimeout((function(){e.calcHeight()}),500);case 11:case"end":return n.stop()}}),n)})))()},onShow:function(){getApp().globalData.g_chat&&getApp().globalData.g_chat.updateUserMsg(this.userId)},onReady:function(){this.hidePageNavInWechatBrowser(),this.calcHeight()},methods:{sendMsg:function(t,e){getApp().globalData.g_chat&&(getApp().globalData.g_chat.sendMsgToUserCmd(this.userId,t,e),this.content="",this.changeMode(0),this.detail="")},sendDetail:function(){this.detail&&getApp().globalData.g_chat&&(getApp().globalData.g_chat.sendMsgToUserCmd(this.userId,JSON.stringify(this.detail),11),this.detail="")},flushData:function(){if(getApp().globalData.g_chat){var t=getApp().globalData.g_chat.findUser(this.userId);if(t>-1){var e=0;this.msgList.length>0&&(this.msgList[0].id,e=this.msgList[this.msgList.length-1].id),this.msgList=[],this.msgPicList=[];for(var n={},i=getApp().globalData.g_chat.getUserList(),a=0;a<i[t].msgList.length;++a)n=this.deepClone(i[t].msgList[a]),1==n.contentType?(n.contentPic=this.baseFileUrl+"/file/"+n.contentText,this.msgPicList.push(n.contentPic)):11==n.contentType?n.contentText=JSON.parse(n.contentText):n.contentTexts=this.getHref(n.contentText),this.msgList.push(n),this.msgList[a].showTime=this.getMsgTime(a);if(this.msgList.length>0){this.msgList[0].id;var r=this.msgList[this.msgList.length-1].id;e!=r&&this.scrollToMsg(),this.msgList[0].isLastHistory?this.loadMore=!1:this.loadMore=!0}else this.loadMore=!1}this.flushCnt++}},getMsgTime:function(t){var e=0,n=r.default.ISO8601DateStr2Date(this.msgList[t].time);t>0&&(e=r.default.ISO8601DateStr2Date(this.msgList[t-1].time));var i=r.default.getChatTime(n,e);return i},scrollToMsg:function(){var t=this;setTimeout((function(){t.scrollIntoView="msg_"+(t.msgList.length-1)}),200)},loadMoreMsg:function(){getApp().globalData.g_chat&&getApp().globalData.g_chat.getMsgHistoryCmd(this.userId,!0)},calcHeight:function(){var t=this;uni.getSystemInfo({success:function(e){var n=e.windowHeight,i=0,a=uni.createSelectorQuery().select(".msgLst");a.boundingClientRect((function(t){i=t.top})).exec();var r=uni.createSelectorQuery().select(".send");r.boundingClientRect((function(e){t.scrollHeight=n-i-e.height})).exec(),console.log(t.scrollHeight)}})},isSelf:function(t){return getApp().globalData.g_chat.isSelf(t)},getUserHead:function(t){var e="";if(getApp().globalData.g_chat.isSelf(t))e=getApp().globalData.userInfo.userHeadPic;else for(var n=getApp().globalData.g_chat.getUserList(),i=0;i<n.length;++i)if(n[i].userId==t){e=n[i].head_pic;break}return e?this.$baseFileUrl+"/file/"+e:"../static/imgs/mine/avatar.png"},changeMode:function(t){0==t?1==this.mode&&(this.mode=0,this.scrollHeight+=uni.upx2px(300)):0==this.mode?(this.mode=1,this.scrollHeight-=uni.upx2px(300)):(this.mode=0,this.scrollHeight+=uni.upx2px(300))},actionMode:function(t){var e=this;0==t?uni.chooseImage({count:9,sourceType:["album"],success:function(t){console.log("图片选择成功",t),e.sendpic(t)}}):1==t&&uni.chooseImage({count:9,sourceType:["camera"],success:function(t){e.sendpic(t)}})},sendpic:function(t){for(var e=this,n=t.tempFilePaths,i=[],a=function(t){i.push(new Promise((function(i,a){console.log("上传项",n[t]),uni.uploadFile({url:e.$baseFileUrl+"/upload",fileType:"image",filePath:n[t],name:"upload-images",success:function(t){if(console.log("上传成功",t),200===t.statusCode){console.log("图片信息",t.data);var n=t.data.split("|")[0];e.sendMsg(n,1)}else console.log()("failt to upload image:",t),uni.showToast({title:"图片上传失败",icon:"none",duration:2e3})},fail:function(t){console.log("failt to upload image:",t),uni.showToast({title:"网络连接失败",icon:"none",duration:2e3})}})})))},r=0;r<n.length;r++)a(r)},previewImage:function(t){uni.previewImage({current:t,urls:this.msgPicList,indicator:"default"})},copyItem:function(t){uni.setClipboardData({data:t,success:function(){uni.showToast({title:"复制成功",icon:"none"})}})},getHref:function(t){if(!t)return[];var e=/(https?:\/\/|www\.)[a-zA-Z_0-9\-@]+(\.\w[a-zA-Z_0-9\-:]+)+(\/[\(\)~#&\-=?\+\%/\.\w]+)?/g;t=t.replace(e,(function(t){return"b6b675fZ-fc22-4947-b0e2-887adX93d23e"+t+"b6b675fZ-fc22-4947-b0e2-887adX93d23e"})),t=t.split("b6b675fZ-fc22-4947-b0e2-887adX93d23e");for(var n=[],i=0;i<t.length;++i)if(t[i].length>0)if(-1==t[i].search(e))n.push({isUrl:!1,text:t[i]});else{var a=t[i];-1==a.indexOf("http")&&(a="http://"+a),n.push({isUrl:!0,text:t[i],url:a})}return n},gotoDetail:function(t,e){"jewelry"==t?uni.navigateTo({url:"../jewelry/jewelryDetails?id="+e}):"hermes"==t?uni.navigateTo({url:"../hermes/details?id="+e}):"watch"==t&&uni.navigateTo({url:"../watch/detail?id="+e})},showUserNote:function(){this.userNote&&uni.setClipboardData({data:this.userNote,success:function(){uni.showToast({title:"复制推荐人成功",icon:"none"})}})}}};e.default=o},ff76:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"\n.uni-link[data-v-03b6d5de]{cursor:pointer}\n.uni-link--withline[data-v-03b6d5de]{text-decoration:underline}",""]),t.exports=e}}]);