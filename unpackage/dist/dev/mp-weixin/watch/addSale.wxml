<view class="sale-product-container data-v-22d1b6ac"><view class="sale-product-msg sale-msg data-v-22d1b6ac"><view class="title data-v-22d1b6ac">出售商品</view><view class="product-input data-v-22d1b6ac"><uni-easyinput class="uni-mt-5 data-v-22d1b6ac" vue-id="37641cc8-1" suffixIcon="search" placeholder="输入手表型号查找手表" confirm-type="search" value="{{keyword}}" data-event-opts="{{[['^iconClick',[['searchWatch']]],['^confirm',[['searchWatch']]],['^input',[['__set_model',['','keyword','$event',[]]]]]]}}" bind:iconClick="__e" bind:confirm="__e" bind:input="__e" bind:__l="__l"></uni-easyinput></view><view style="margin-top:40rpx;" class="data-v-22d1b6ac"><uni-table vue-id="37641cc8-2" border="{{true}}" emptyText="暂无数据" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-tr vue-id="{{('37641cc8-3')+','+('37641cc8-2')}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-th vue-id="{{('37641cc8-4')+','+('37641cc8-3')}}" width="100" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">型号</uni-th><uni-th vue-id="{{('37641cc8-5')+','+('37641cc8-3')}}" width="200" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">出售金额</uni-th><uni-th vue-id="{{('37641cc8-6')+','+('37641cc8-3')}}" width="150" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">成本(HKD)</uni-th><uni-th vue-id="{{('37641cc8-7')+','+('37641cc8-3')}}" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">操作</uni-th></uni-tr><block wx:for="{{sellOrderDetailList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-tr vue-id="{{('37641cc8-8-'+index)+','+('37641cc8-2')}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-td vue-id="{{('37641cc8-9-'+index)+','+('37641cc8-8-'+index)}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><text class="data-v-22d1b6ac">{{item.brand}}</text><view class="model data-v-22d1b6ac">{{''+item.model+''}}</view></uni-td><uni-td vue-id="{{('37641cc8-10-'+index)+','+('37641cc8-8-'+index)}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><view style="display:flex;" class="data-v-22d1b6ac"><uni-easyinput bind:input="__e" class="uni-input data-v-22d1b6ac" vue-id="{{('37641cc8-11-'+index)+','+('37641cc8-10-'+index)}}" type="number" placeholder="请输入" value="{{item.sellMoney}}" data-event-opts="{{[['^input',[['__set_model',['$0','sellMoney','$event',[]],[[['sellOrderDetailList','',index]]]]]]]}}" bind:__l="__l"></uni-easyinput><picker mode="selector" range="{{priceCurrencys}}" range-key="text" data-event-opts="{{[['change',[['currencyChange',['$event']]]]]}}" bindchange="__e" class="data-v-22d1b6ac"><view class="currency-sel data-v-22d1b6ac" style="{{'color:'+(saleWatchData.sellCurrency?'#000':'#999')+';'}}">{{''+(saleWatchData.sellCurrency?saleWatchData.sellCurrency:"选择币种")+''}}</view></picker></view></uni-td><uni-td vue-id="{{('37641cc8-12-'+index)+','+('37641cc8-8-'+index)}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><view style="display:flex;" class="data-v-22d1b6ac"><uni-easyinput bind:input="__e" class="uni-input data-v-22d1b6ac" vue-id="{{('37641cc8-13-'+index)+','+('37641cc8-12-'+index)}}" type="number" placeholder="请输入" value="{{item.cost}}" data-event-opts="{{[['^input',[['__set_model',['$0','cost','$event',[]],[[['sellOrderDetailList','',index]]]]]]]}}" bind:__l="__l"></uni-easyinput></view></uni-td><uni-td vue-id="{{('37641cc8-14-'+index)+','+('37641cc8-8-'+index)}}" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><text data-event-opts="{{[['tap',[['delWatch',[index]]]]]}}" bindtap="__e" class="data-v-22d1b6ac">删除</text></uni-td></uni-tr></block></uni-table></view></view><uni-popup vue-id="37641cc8-15" type="bottom" data-ref="watchPopup" class="data-v-22d1b6ac vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="watch-popup-container data-v-22d1b6ac"><block wx:if="{{checkWatchList.length==0}}"><view class="no-data data-v-22d1b6ac" style="padding-top:150rpx;"><image src="../static/imgs/common/no.png" mode="aspectFill" class="data-v-22d1b6ac"></image><text style="font-size:30rpx;" class="data-v-22d1b6ac">没有查找到相关手表哦~</text></view></block><block wx:else><view class="data-v-22d1b6ac"><view class="popup-title data-v-22d1b6ac"><text class="title data-v-22d1b6ac">手表列表</text><text data-event-opts="{{[['tap',[['selEnd',['$event']]]]]}}" class="yes data-v-22d1b6ac" bindtap="__e">完成</text></view><view class="product-msg data-v-22d1b6ac" style="height:65vh;overflow-y:scroll;"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i0__" wx:key="stockId"><view class="data-v-22d1b6ac"><view class="item data-v-22d1b6ac"><view class="img data-v-22d1b6ac"><block wx:if="{{item.$orig.pic}}"><image class="img data-v-22d1b6ac" src="{{imgUrl+item.g0}}" mode="aspectFill"></image></block></view><view style="flex:1;" class="data-v-22d1b6ac"><view class="every-name data-v-22d1b6ac"><view class="bh data-v-22d1b6ac">{{item.$orig.brand+" - "+item.$orig.series+''}}<block wx:if="{{!item.$orig.stockId}}"><text style="margin-left:10rpx;color:#1ecc99;" class="data-v-22d1b6ac">新购</text></block></view><view data-event-opts="{{[['tap',[['selThisWatch',['$0'],[[['checkWatchList','stockId',item.$orig.stockId]]]]]]]}}" class="sale-button data-v-22d1b6ac" catchtap="__e">添加</view></view><view class="every-main data-v-22d1b6ac"><view class="cs data-v-22d1b6ac">{{item.$orig.model}}</view><block wx:if="{{item.$orig.warehouseName}}"><view class="cs data-v-22d1b6ac">库存地：<text class="data-v-22d1b6ac">{{item.$orig.warehouseName}}</text></view></block></view><view class="every-main data-v-22d1b6ac"><view class="cs data-v-22d1b6ac"><text class="data-v-22d1b6ac">{{item.m0}}</text></view></view></view></view></view></block></view></view></block></view></uni-popup><view class="sale-msg data-v-22d1b6ac"><view class="title data-v-22d1b6ac">销售信息</view><uni-forms vue-id="37641cc8-16" labelWidth="70" labelAlign="right" modelValue="{{saleWatchData}}" rules="{{saleWatchRules}}" data-ref="saleWatchForm" class="data-v-22d1b6ac vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><uni-forms-item vue-id="{{('37641cc8-17')+','+('37641cc8-16')}}" label="出售时间" name="sellTime" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-datetime-picker bind:input="__e" vue-id="{{('37641cc8-18')+','+('37641cc8-17')}}" type="date" value="{{saleWatchData.sellTime}}" data-event-opts="{{[['^input',[['__set_model',['$0','sellTime','$event',[]],['saleWatchData']]]]]}}" class="data-v-22d1b6ac" bind:__l="__l"></uni-datetime-picker></uni-forms-item><block wx:if="{{role=='admin'}}"><uni-forms-item vue-id="{{('37641cc8-19')+','+('37641cc8-16')}}" label="渠道" name="channelId" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><picker mode="selector" range="{{channelList}}" value="{{channelIdx}}" range-key="name" data-event-opts="{{[['change',[['terraceChange',['$event']]]]]}}" bindchange="__e" class="data-v-22d1b6ac"><view class="currency-sel data-v-22d1b6ac" style="{{'color:'+(channelIdx>-1?'#000':'#999')+';'}}">{{''+(channelIdx>-1?channelList[channelIdx].name:"请选择")+''}}</view></picker></uni-forms-item></block><uni-forms-item vue-id="{{('37641cc8-20')+','+('37641cc8-16')}}" label="顾客账号" name="customerId" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><picker mode="selector" range="{{customerList}}" value="{{customerIdx}}" range-key="username" data-event-opts="{{[['change',[['customerChange',['$event']]]]]}}" bindchange="__e" class="data-v-22d1b6ac"><view class="currency-sel data-v-22d1b6ac" style="{{'color:'+(channelIdx>-1?'#000':'#999')+';'}}">{{''+(customerIdx>-1?customerList[customerIdx].username:"请选择")+''}}</view></picker></uni-forms-item><uni-forms-item vue-id="{{('37641cc8-21')+','+('37641cc8-16')}}" label="顾客姓名" name="customer" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('37641cc8-22')+','+('37641cc8-21')}}" type="text" placeholder="请输入" value="{{saleWatchData.customer}}" data-event-opts="{{[['^input',[['__set_model',['$0','customer','$event',[]],['saleWatchData']]]]]}}" class="data-v-22d1b6ac" bind:__l="__l"></uni-easyinput></uni-forms-item><uni-forms-item vue-id="{{('37641cc8-23')+','+('37641cc8-16')}}" label="收货地址" name="address" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('37641cc8-24')+','+('37641cc8-23')}}" type="text" placeholder="请输入" value="{{saleWatchData.address}}" data-event-opts="{{[['^input',[['__set_model',['$0','address','$event',[]],['saleWatchData']]]]]}}" class="data-v-22d1b6ac" bind:__l="__l"></uni-easyinput></uni-forms-item><view class="title data-v-22d1b6ac">付款信息</view><view style="margin-bottom:40rpx;" class="data-v-22d1b6ac"><uni-table vue-id="{{('37641cc8-25')+','+('37641cc8-16')}}" border="{{true}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-tr vue-id="{{('37641cc8-26')+','+('37641cc8-25')}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-th vue-id="{{('37641cc8-27')+','+('37641cc8-26')}}" width="150" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">付款日期</uni-th><uni-th vue-id="{{('37641cc8-28')+','+('37641cc8-26')}}" width="200" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">付款金额</uni-th><uni-th vue-id="{{('37641cc8-29')+','+('37641cc8-26')}}" width="200" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">外币金额</uni-th><uni-th vue-id="{{('37641cc8-30')+','+('37641cc8-26')}}" width="150" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">付款备注</uni-th><uni-th vue-id="{{('37641cc8-31')+','+('37641cc8-26')}}" width="100" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}">操作</uni-th></uni-tr><block wx:for="{{saleWatchData.paymentList}}" wx:for-item="pay" wx:for-index="index2" wx:key="index2"><uni-tr vue-id="{{('37641cc8-32-'+index2)+','+('37641cc8-25')}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-td vue-id="{{('37641cc8-33-'+index2)+','+('37641cc8-32-'+index2)}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-datetime-picker bind:input="__e" vue-id="{{('37641cc8-34-'+index2)+','+('37641cc8-33-'+index2)}}" type="date" value="{{pay.payTime}}" data-event-opts="{{[['^input',[['__set_model',['$0','payTime','$event',[]],[[['saleWatchData.paymentList','',index2]]]]]]]}}" class="data-v-22d1b6ac" bind:__l="__l"></uni-datetime-picker></uni-td><uni-td vue-id="{{('37641cc8-35-'+index2)+','+('37641cc8-32-'+index2)}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><view style="display:flex;" class="data-v-22d1b6ac"><uni-easyinput bind:input="__e" class="uni-input data-v-22d1b6ac" vue-id="{{('37641cc8-36-'+index2)+','+('37641cc8-35-'+index2)}}" type="number" placeholder="请输入金额" value="{{pay.payMoney}}" data-event-opts="{{[['^input',[['__set_model',['$0','payMoney','$event',[]],[[['saleWatchData.paymentList','',index2]]]]]]]}}" bind:__l="__l"></uni-easyinput><picker mode="selector" range="{{priceCurrencys}}" range-key="text" data-event-opts="{{[['change',[['currencyChange',['$event']]]]]}}" bindchange="__e" class="data-v-22d1b6ac"><view class="currency-sel data-v-22d1b6ac" style="{{'color:'+(saleWatchData.sellCurrency?'#000':'#999')+';'}}">{{''+(saleWatchData.sellCurrency?saleWatchData.sellCurrency:"选择币种")+''}}</view></picker></view></uni-td><uni-td vue-id="{{('37641cc8-37-'+index2)+','+('37641cc8-32-'+index2)}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><view style="display:flex;" class="data-v-22d1b6ac"><uni-easyinput bind:input="__e" class="uni-input data-v-22d1b6ac" vue-id="{{('37641cc8-38-'+index2)+','+('37641cc8-37-'+index2)}}" type="number" placeholder="请输入金额" value="{{pay.foreignMoney}}" data-event-opts="{{[['^input',[['__set_model',['$0','foreignMoney','$event',[]],[[['saleWatchData.paymentList','',index2]]]]]]]}}" bind:__l="__l"></uni-easyinput><picker mode="selector" range="{{priceCurrencys}}" range-key="text" data-event-opts="{{[['change',[['currencyChange2',['$event']]]]]}}" bindchange="__e" class="data-v-22d1b6ac"><view data-event-opts="{{[['tap',[['currencyClick',[index2]]]]]}}" class="currency-sel data-v-22d1b6ac" style="{{'color:'+(pay.foreignCurrency?'#000':'#999')+';'}}" bindtap="__e">{{''+(pay.foreignCurrency?pay.foreignCurrency:"外币币种")+''}}</view></picker></view></uni-td><uni-td vue-id="{{('37641cc8-39-'+index2)+','+('37641cc8-32-'+index2)}}" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('37641cc8-40-'+index2)+','+('37641cc8-39-'+index2)}}" type="textarea" placeholder="请输入" value="{{pay.note}}" data-event-opts="{{[['^input',[['__set_model',['$0','note','$event',[]],[[['saleWatchData.paymentList','',index2]]]]]]]}}" class="data-v-22d1b6ac" bind:__l="__l"></uni-easyinput></uni-td><uni-td vue-id="{{('37641cc8-41-'+index2)+','+('37641cc8-32-'+index2)}}" align="center" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{index2==0}}"><image style="width:40rpx;height:40rpx;" src="../static/imgs/chat/add.png" mode="aspectFill" data-event-opts="{{[['tap',[['addPayMsg',['$event']]]]]}}" bindtap="__e" class="data-v-22d1b6ac"></image></block><block wx:else><uni-icons vue-id="{{('37641cc8-42-'+index2)+','+('37641cc8-41-'+index2)}}" type="trash-filled" size="26" data-event-opts="{{[['^click',[['delPayMsg',[index2]]]]]}}" bind:click="__e" class="data-v-22d1b6ac" bind:__l="__l"></uni-icons></block></uni-td></uni-tr></block></uni-table></view><uni-forms-item vue-id="{{('37641cc8-43')+','+('37641cc8-16')}}" label="出售备注" name="note" class="data-v-22d1b6ac" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('37641cc8-44')+','+('37641cc8-43')}}" type="textarea" placeholder="请输入" value="{{saleWatchData.note}}" data-event-opts="{{[['^input',[['__set_model',['$0','note','$event',[]],['saleWatchData']]]]]}}" class="data-v-22d1b6ac" bind:__l="__l"></uni-easyinput></uni-forms-item></uni-forms></view><view data-event-opts="{{[['tap',[['addSale',['$event']]]]]}}" class="submit-btn data-v-22d1b6ac" bindtap="__e">提交</view></view>